# 오늘의 질문

해당 질문은 "매일메일" 서비스에서 참고하였습니다.

## ⁉️ 브라우저 렌더링 파이프라인에 대해서 설명해주세요.

### 브라우저 렌더링 파이프라인이란?

브라우저가 웹 페이지를 화면에 표시하기 위해 거치는 과정

### 1 단계 : DOM 생성

1. 브라우저가 HTML 파일을 받으면, 이 파일을 바이트 (byte) 단위로 읽기 시작함
2. 브라우저의 HTML 파서는 이 바이트들을 문자로 변환 -> HTML 토큰으로 변환
3. 이 HTML 토큰들은 각각의 태그와 그 안에 포함된 텍스트, 속성 등을 의미하게 됨

HTML 토큰이 생성되면, 브라우저는 이를 기반으로 **DOM 트리** 를 생성함. DOM 트리는 HTML 문서의 구조를 트리 형태로 표현한 것으로, 각 태그가 노드가 되어 부모-자식 관계를 형성함. 예를 들어 `<body>` 태그 아래에 `<div>` 가 있다면, DOM 트리에서도 `<body>` 노드 아래에 `<div>`노드가 있게 됨

### 2 단계 : CSSOM 생성

1. 브라우저는 CSS 파일을 파싱함. CSS 파일 역시 바이트로 전송됨
2. 브라우저는 이를 문자로 변환한 뒤 CSS 규칙으로 나눔
3. 각 CSS 규칙은 **선택자**와 **선언**으로 구성되는데 선택자는 스타일을 적용할 HTML 요소를 정의하고 선언은 적용할 스타일을 정의함

브라우저는 이 CSS 규칙들을 기반으로 CSSOM 트리를 생성함. CSSOM 트리는 DOM 과 유사하게 트리 구조를 가지며, 각 노드는 해당 노드에 적용될 스타일 정보를 포함함

### 3 단계 : 렌더 트리 생성

1. 브라우저는 DOM 과 CSSOM 을 결합하여 렌더 트리를 생성함
2. 렌더 트리는 화면에 실제로 표시될 요소들로만 구성됨
3. 예를 들어, display : none 속성이 있는 요소는 렌더 트리에 포함되지 않음.

렌더 트리의 각 노드는 DOM 트리의 요소와 연결되며, CSSOM 트리에서 해당 요소에 적용된 스타일 정보를 포함함. 즉, 렌더 트리는 HTML 문서의 구조와 각 요소의 스타일 정보를 모두 포함한 트리임

### 4 단계 : 레이아웃

1. 렌더 트리가 생성된 후, 브라우저는 렌더 트리를 사용해 각 요소의 정확한 위치와 크기를 계산함 -> 이 과정이 레이아웃임
2. 레이아웃 과정에서는 렌더 트리의 각 노드가 화면의 어디에 위치할지, 얼마나 큰지를 계산함

이 계산은 화면의 뷰표트 크기와 같은 정보에 의존함. 예를 들어, 화면 크기와 변경되면 브라우저는 레이아웃 과정을 다시 수행해야 함. (이 과정을 "리플로우 (Reflow)" 라고 부름. 성능에 영향을 줄 수 있으므로 최소화하는 것이 중요)

### 5 단계 : 페인팅

1. 레이아웃이 완료되면 브라우저는 각 요소를 실제로 화면에 그리기 시작함
2. 페인팅 단계에서는 텍스트, 색상, 그림자, 이미지 등 모든 시작적 요소가 화면에 그려짐

페인팅은 화면에 표시될 그래픽 요소를 생성하는 과정이기 때문에 이 과정도 성능에 큰 영향을 줄 수 있음. 특히 복잡한 그래픽이나 애니메이션이 포함될 경우 페인트 작업이 많아져 성능 저하될 수 있음

### 6 단계 : 컴포지팅

1. 브라우저는 화면에 그려질 요소들을 각각의 레이어로 분리하고 이 레이어들을 결합하여 최종 화면을 구성함
2. 이 과정에서는 GPU 를 활용하여 각 레이어를 빠르게 합성함

transform 과 opacity 와 같은 속성은 레이아웃이나 페인트 과정을 거치지 않고, 컴포지팅 단계에서만 처리됨. -> 이러한 속성을 사용하는 애니메이션은 더 부드럽고 빠르게 실행됨.

컴포지팅 단계는 GPU 가속을 활용하여 성능을 최적화하고, 화면에 최종적으로 표시되는 결과를 빠르게 생성하는 데 중요한 역할을 함
