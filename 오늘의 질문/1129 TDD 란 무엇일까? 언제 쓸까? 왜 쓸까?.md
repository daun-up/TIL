# TDD 란 무엇일까? 언제 쓸까? 왜 쓸까?

### 주제 선정 이유

우테코 프리코스를 진행하며 지겹도록 들었던 말... "우테코는 TDD 지향한다고 하더라고요" 나는 TDD 가 뭔지도 몰랐기 때문에 당연히 적용하진 못했었다. 단위 테스트라곤 하는데 백엔드 하는 친구들이 테스트 하는 건 봤지만 프론트엔드도? TDD 가 필요할까? 소아키 시험 공부를 하면서 ADD 를 배웠다. ADD 어딘가 익숙한데? 아 TDD! 하고 TDD 를 꺼내본다.

### TDD 하는 이유

릴리즈된 어플리케이션은 계속해서 유지보수하게 된다. 시간이 흐를수록 다른 모습이 되어가는데, 이럴 때 기존 코드를 추가/수정/삭제할 때 어떻게 기존에 있던 동작이 변하지 않았음을 증명할 수 있을까? 어플리케이션을 구동시켜 직접 확인해볼 수도 있지만 매번 모든 기능을 일일이 확인하긴 어렵다.

### TDD 란

테스트 주도 개발 (Test Driven Development, TDD) 익스트림 프로그래밍의 일부로 제안 되었다. TDD 는 동작하는 코드를 작성하기 이전에 테스트를 먼저 작성하고, 그 테스트를 통과하는 코드를 작성함으로써 테스트된 동작하는 코드를 얻는 개발 방법이다.

TDD 는 세 가지 단계를 한 사이클로 돌게 된다.

- 실패하는 테스트 코드를 작성한다 (빨간 막대)
- 테스트 코드를 성공시키기 위한 실제 코드를 작성한다, 이 과정에서는 테스트를 통과하기 위해 단순 복사하기+붙여넣기 또는 설계를 무시한 개발 등을 해도 된다. (초록 막대)
- 위의 과정에서 발생한 중복 코드 제거, 올바르지 못한 구조 해결, 일반화 등의 리팩토링을 수행한다.

흔히 red-green-refactoring cycle 이라고 한다. 컴파일조차 되지 않는 코드를 대상으로 먼저 테스트를 작성하고, 그다음 테스트 코드가 컴파일되고 실행까지 되도록 코드를 작성한 후 테스트가 통과되면 테스트의 보호 아래 코드를 다듬는 것이다.

### 프론트에선 TDD 어떻게 해요?

프론트엔드 관점에서의 테스트 대상은 다음과 같다.

- 시각적 요소
  - 스냅샷 테스트
    - HTML 구조가 의도한 대로 나타나는지 테스트
    - Jest 를 통해 구현 가능
  - 시각적 회귀 테스트 (Visual Regression Test)
    - HTML 에 CSS 를 덧입혀 컴포넌트가 실제로 브라우저에서 렌더링되는 모습이 의도한 모습고 ㅏ같은지 테스트
    - Storybook 에서 만든 Chomatic 을 통해 구현 가능
- 사용자 이벤트 처리
  - JS API 또는 React 에서 권장하는 테스트 도구인 react-testing-library 패키지를 활용해 효율적인 사용자 이벤트 시뮬레이션이 가능
- API 통신
  - Jest 를 통해 모듈을 간단한 방법으로 Mocking 할 수 있음

### TDD 의 장점

- 객체지향적인 코드 구현
- 재설계 시간 단축
- 디버깅 시간 단축
- 추가 구현 시 용이
- 더 좋은 문서화 가능

### 좋은 테스트 코드, FIRST

1. Fast
   - 테스트는 자주 실행시키기 부담스럽지 않을 정도로 빨라야 한다.
2. Independent
   - 각각의 테스트는 독립적이어야 한다. 의존성이 생길 경우 다른 테스트에도 영향을 미칠 수 있게 되기 때문이다.
3. Repeatable
   - 어떤 환경에서도 반복할 수 있어야 한다. 어떤 환경에서든 같은 결과값을 반환해야 신뢰성을 가질 수 있기 때문이다.
4. Self-Validating
   - 테스트의 결과 값은 boolean 타입이어야 하고, 이 결과로 자체 검증이 가능해야 한다. 이를 통해 테스트 코드를 위한 불필요한 로그, 데이터 추적이 불필요해질 수 있다.
5. Timely
   - 테스트 코드는 적시(서비스 코드를 구현하기 전)에 작성되어야 한다. TDD가 가능하려면 테스트 코드 작성이 선행되어야 하기 때문이다.

참고 <br>

[망나니개발자](https://mangkyu.tistory.com/182)<br>
[실전에서 TDD 하기](https://tech.kakaopay.com/post/implementing-tdd-in-practical-applications/)<br>
[프론트엔드에서 TDD 경험해보기](https://velog.io/@hamjw0122/FE-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C%EC%97%90%EC%84%9C-TDD-%EA%B2%BD%ED%97%98%ED%95%B4%EB%B3%B4%EA%B8%B0-1-TDD%EB%9E%80)
